# 自動化コマンド群

## 概要

開発プロセスを効率化するための自動化コマンド群です。コミット・プッシュ・デプロイなどの日常的な作業を自動化し、一貫性のある開発体験を提供します。

## コミット・プッシュ自動化

### `/project:commit-push-smart`

**目的**: インテリジェントなコミット作成とプッシュを一括実行

**機能**:
- 変更内容の分析
- 適切なコミットメッセージの生成
- Issue番号の自動挿入
- リモートへの自動プッシュ
- プッシュ前の安全性チェック

**実装内容**:
```markdown
# 変更内容を分析してスマートコミット&プッシュを実行します

!git status
!git diff --cached
!git diff --stat
!git branch --show-current
!git log --oneline -3

以下の手順で安全なコミット&プッシュを実行してください:

1. **変更内容の分析**
   - ステージされた変更の確認
   - 変更の性質とスコープの特定
   - 破壊的変更の有無を確認

2. **コミットメッセージの生成**
   - Conventional Commits形式で作成
   - ブランチ名からIssue番号を抽出して挿入
   - 変更内容に応じた適切なタイプを選択

3. **安全性チェック**
   - 機密情報の漏洩チェック
   - 大きなファイルの確認
   - コンフリクトの有無確認

4. **実行前確認**
   - 生成されたコミットメッセージを表示
   - ユーザーに最終確認を求める

承認後、コミットとプッシュを実行してください。
```

### `/project:amend-push`

**目的**: 直前のコミットの修正とforce push

**機能**:
- 直前のコミットに変更を追加
- コミットメッセージの修正
- 安全なforce pushの実行

**実装内容**:
```markdown
# 直前のコミットを修正してプッシュします

!git log --oneline -1
!git status
!git diff --cached

直前のコミットを安全に修正してください:

1. **現在の状況確認**
   - 最新コミットの内容表示
   - ステージされた変更の確認

2. **修正の実行**
   - git commit --amendで修正
   - 必要に応じてコミットメッセージも更新

3. **プッシュの安全性確認**
   - リモートでの競合がないか確認
   - チームメンバーに影響がないか確認

4. **Force pushの実行**
   - --force-with-leaseオプションを使用して安全にpush

警告: このコマンドは既にプッシュされたコミットを変更します。
チームでの作業時は十分注意してください。
```

### `/project:quick-commit [message]`

**目的**: 簡単なコミット作成（メッセージ指定）

**機能**:
- 指定されたメッセージでクイックコミット
- ステージされていない変更を自動ステージ
- Issue番号の自動挿入

**実装内容**:
```markdown
# クイックコミットを実行します: "$ARGUMENTS"

!git status
!git add -A
!git branch --show-current

指定されたメッセージでクイックコミットを作成してください:

1. **変更の自動ステージ**
   - すべての変更をステージに追加
   - 削除されたファイルも含める

2. **コミットメッセージの処理**
   - 提供されたメッセージを使用: "$ARGUMENTS"
   - ブランチ名からIssue番号を抽出して追加
   - 適切なプレフィックスが不足している場合は補完

3. **コミットの実行**
   - 処理されたメッセージでコミット作成

使用例: `/project:quick-commit "fix typo in documentation"`
結果例: `docs(#123): fix typo in documentation`
```

## CI/CD連携

### `/project:check-ci`

**目的**: CI/CDの状態確認

**機能**:
- GitHub Actionsの実行状況確認
- テスト結果の表示
- デプロイ状況の確認

**実装内容**:
```markdown
# CI/CDの状況を確認します

!gh run list --limit 10
!gh pr checks

現在のCI/CDの状況を包括的に確認してください:

1. **最近のワークフロー実行**
   - 成功/失敗の状況
   - 実行時間の確認
   - エラーがある場合の詳細取得

2. **Pull Requestのチェック**
   - 必須チェックの通過状況
   - 失敗したチェックの詳細

3. **推奨アクション**
   - 失敗している場合の対処法提案
   - 次に実行すべき手順の提示

CI/CDの状況を分析し、開発進行への影響を評価してください。
```

### `/project:trigger-deploy [environment]`

**目的**: 手動デプロイのトリガー

**機能**:
- 指定環境への手動デプロイ実行
- デプロイ前の安全性確認
- デプロイ状況の監視

**実装内容**:
```markdown
# $ARGUMENTS環境へのデプロイをトリガーします

!gh workflow list
!git log --oneline -5
!gh pr list --state merged --limit 5

指定された環境へのデプロイを安全に実行してください:

1. **デプロイ前チェック**
   - 最新のマージ状況確認
   - CI/CDの通過状況確認
   - デプロイ対象の変更内容確認

2. **デプロイワークフローの特定**
   - 利用可能なワークフローを確認
   - 対象環境に適したワークフローを選択

3. **デプロイ実行**
   - 手動トリガーでワークフロー実行
   - 実行状況の監視

環境: $ARGUMENTS (staging, production等)
```

## 品質保証自動化

### `/project:full-check`

**目的**: コミット前の包括的品質チェック

**機能**:
- リンティング
- テスト実行
- 型チェック
- セキュリティスキャン

**実装内容**:
```markdown
# コミット前の包括的品質チェックを実行します

!find . -name "package.json" -o -name "Cargo.toml" -o -name "pyproject.toml" | head -3
!git diff --name-only --cached

変更されたファイルに対して包括的な品質チェックを実行してください:

1. **プロジェクトタイプの特定**
   - 設定ファイルから使用技術を判定
   - 利用可能な品質ツールを特定

2. **段階的チェック実行**
   - **構文・スタイル**: リンター実行
   - **型安全性**: 型チェッカー実行  
   - **テスト**: 関連テスト実行
   - **セキュリティ**: 脆弱性スキャン

3. **結果の統合レポート**
   - 各チェックの結果をまとめて表示
   - 修正が必要な項目の一覧化
   - 優先度の設定

すべてのチェックが通過するまで、コミットを推奨しません。
```

### `/project:pre-commit-setup`

**目的**: pre-commitフックの設定

**機能**:
- プロジェクトに適したpre-commitフックの設定
- 自動的な品質チェックの有効化

**実装内容**:
```markdown
# pre-commitフックを設定します

!ls -la .git/hooks/
!find . -name ".pre-commit-config.yaml" -o -name "package.json" -o -name "Cargo.toml"

プロジェクトに適したpre-commitフックを設定してください:

1. **既存設定の確認**
   - 現在のフック状況確認
   - 既存の設定ファイル検出

2. **推奨フックの提案**
   - プロジェクトタイプに応じたフック選択
   - 品質ツールとの連携設定

3. **フックの設定**
   - 適切なpre-commitフックスクリプト作成
   - 実行権限の設定
   - テスト実行による動作確認

設定後、コミット時に自動的に品質チェックが実行されます。
```

## 緊急対応コマンド

### `/project:hotfix-start [description]`

**目的**: 緊急修正ブランチの作成

**機能**:
- mainブランチから緊急修正ブランチを作成
- Issue作成（緊急度高）
- 修正用worktreeの準備

**実装内容**:
```markdown
# 緊急修正: "$ARGUMENTS" のためのhotfixを開始します

!git checkout main
!git pull origin main
!gh issue create --title "🚨 Hotfix: $ARGUMENTS" --body "緊急修正が必要です。詳細: $ARGUMENTS" --label "hotfix,priority:high"

緊急修正のセットアップを実行してください:

1. **メインブランチの更新**
   - 最新状態に同期
   - クリーンな状態を確認

2. **緊急Issue作成**
   - 高優先度ラベルを付与
   - 緊急度を明示

3. **Hotfixブランチとworktree作成**
   - hotfix/緊急修正内容 形式のブランチ
   - 専用worktreeで作業環境準備

4. **チーム通知**
   - 緊急修正開始の通知準備
   - レビュアーのアサイン準備

緊急修正: $ARGUMENTS
```

### `/project:rollback [commit_hash]`

**目的**: 安全なロールバック実行

**機能**:
- 指定コミットへの安全なロールバック
- 影響範囲の分析
- ロールバック後の検証

**実装内容**:
```markdown
# コミット $ARGUMENTS へのロールバックを実行します

!git log --oneline -10
!git show $ARGUMENTS --stat
!git branch --show-current

指定されたコミットへの安全なロールバックを実行してください:

1. **影響範囲の分析**
   - ロールバック対象の変更内容確認
   - 影響を受けるファイルの特定
   - データ損失リスクの評価

2. **ロールバック方法の選択**
   - git revert (推奨): 新しいコミットで取り消し
   - git reset: 履歴を直接変更（危険）

3. **安全性の確認**
   - 他の開発者への影響確認
   - CI/CDへの影響評価

4. **実行と検証**
   - 選択された方法でロールバック実行
   - 動作検証の実施

ロールバック対象: $ARGUMENTS
```

これらのコマンドにより、日常的な開発作業から緊急対応まで、幅広いシナリオに対応できる自動化環境が構築できます。